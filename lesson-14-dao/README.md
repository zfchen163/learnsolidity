# ç¬¬14è¯¾ï¼šDAO - å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ ğŸ—³ï¸

## ğŸ¯ è¿™ä¸€è¯¾ä½ ä¼šå­¦åˆ°
- ä»€ä¹ˆæ˜¯ DAOï¼ˆä»£ç ç®¡ç†çš„ç¤¾åŒºï¼‰
- DAO çš„ä¸‰å¤§ä»¶ï¼šä»£å¸ã€æ²»ç†åˆçº¦ã€æ—¶é—´é”
- å¦‚ä½•å‘èµ·ææ¡ˆå’ŒæŠ•ç¥¨
- æ²»ç†æ”»å‡»ä¸é˜²èŒƒ

---

## ğŸ›ï¸ ä»€ä¹ˆæ˜¯ DAOï¼Ÿ

### ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼šæ²¡æœ‰æ ¡é•¿çš„å­¦ç”Ÿä¼š

æƒ³è±¡ä¸€ä¸ªå­¦ç”Ÿä¼šï¼š
- **æ²¡æœ‰æ ¡é•¿**ï¼šæ²¡æœ‰ä¸€ä¸ªäººè¯´äº†ç®—ã€‚
- **æ¯ä¸ªäººéƒ½æœ‰ç¥¨**ï¼šæ‰€æœ‰å†³å®šï¼ˆæ¯”å¦‚â€œå‘¨äº”ä¹°æŠ«è¨â€è¿˜æ˜¯â€œä¹°æ±‰å ¡â€ï¼‰éƒ½è¦å¤§å®¶æŠ•ç¥¨ã€‚
- **è‡ªåŠ¨æ‰§è¡Œ**ï¼šä¸€æ—¦æŠ•ç¥¨é€šè¿‡ï¼Œâ€œä¹°æŠ«è¨æœºå™¨äººâ€å°±ä¼šè‡ªåŠ¨ä¸‹å•ï¼Œæ²¡äººèƒ½èµ–è´¦ã€‚

è¿™å°±æ˜¯ **DAO (Decentralized Autonomous Organization)**ã€‚
å®ƒçš„è§„åˆ™å†™åœ¨**æ™ºèƒ½åˆçº¦**é‡Œï¼Œèµ„é‡‘æ”¾åœ¨**å›½åº“ï¼ˆTreasuryï¼‰**é‡Œï¼Œåªæœ‰æŠ•ç¥¨é€šè¿‡æ‰èƒ½åŠ¨ç”¨ã€‚

---

## ğŸ§© DAO çš„æ ¸å¿ƒä¸‰ä»¶å¥—

è¦æ­å»ºä¸€ä¸ª DAOï¼Œé€šå¸¸éœ€è¦ä¸‰ä¸ªæ ¸å¿ƒåˆçº¦ï¼š

### 1. æ²»ç†ä»£å¸ (Governor Token) - ä½ çš„â€œé€‰ç¥¨â€
- è¿™æ˜¯ä¸€ä¸ª ERC20 ä»£å¸ã€‚
- **åŒºåˆ«**ï¼šå®ƒæœ‰â€œå¿«ç…§â€åŠŸèƒ½ï¼ˆSnapshotï¼‰ã€‚
- **ä¸ºä»€ä¹ˆéœ€è¦å¿«ç…§ï¼Ÿ** å¦‚æœæ²¡æœ‰å¿«ç…§ï¼Œæˆ‘å¯ä»¥åœ¨æŠ•ç¥¨å‰ä¸€ç§’ä¹°å…¥ä»£å¸ï¼ŒæŠ•å®Œç¥¨ç«‹åˆ»å–æ‰ã€‚æœ‰äº†å¿«ç…§ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥ï¼šâ€œä½ åœ¨ææ¡ˆå‘èµ·çš„é‚£ä¸ªåŒºå—ï¼Œæ‰‹é‡Œæœ‰å¤šå°‘å¸ï¼Ÿâ€

### 2. æ²»ç†æ ¸å¿ƒ (Governor) - â€œæŠ•ç¥¨ç®±â€ä¸â€œè£åˆ¤â€
- ç®¡ç†ææ¡ˆï¼ˆProposalï¼‰ã€‚
- ç»Ÿè®¡ç¥¨æ•°ï¼ˆFor, Against, Abstainï¼‰ã€‚
- å®£å¸ƒç»“æœã€‚

### 3. æ—¶é—´é” (Timelock) - â€œå†·é™æœŸâ€
- ææ¡ˆé€šè¿‡åï¼Œä¸ä¼šç«‹åˆ»æ‰§è¡Œã€‚
- éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆæ¯”å¦‚ 2 å¤©ï¼‰ã€‚
- **ä½œç”¨**ï¼šå¦‚æœé€šè¿‡äº†ä¸€ä¸ªæ¶æ„ææ¡ˆï¼ˆæ¯”å¦‚â€œæŠŠå›½åº“çš„é’±å…¨ç»™æˆ‘â€ï¼‰ï¼Œç¤¾åŒºæœ‰ 2 å¤©æ—¶é—´ååº”ï¼ˆæ¯”å¦‚æ­¤æ—¶å¤§å®¶å¯ä»¥å–å¸ç¦»åœºï¼Œæˆ–è€…å‘èµ·ç´§æ€¥å¦å†³ï¼‰ã€‚

---

## ğŸ’» ä»£ç å®æˆ˜ï¼šæ­å»ºä¸€ä¸ªè¿·ä½  DAO

æˆ‘ä»¬å°†ä½¿ç”¨ OpenZeppelin çš„æ ‡å‡†åº“ï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„æ–¹å¼ã€‚

### ç¬¬ä¸€æ­¥ï¼šæ²»ç†ä»£å¸ (MyVoteToken)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Votes.sol";

contract MyVoteToken is ERC20Votes {
    constructor() ERC20("DaoToken", "DTK") ERC20Permit("DaoToken") {
        // ç»™åˆ›å»ºè€…å‘ 1000 ä¸ªå¸
        _mint(msg.sender, 1000 * 10**18);
    }

    // ä¸‹é¢è¿™äº›æ˜¯å¿…é¡»è¦é‡å†™çš„æ ·æ¿ä»£ç ï¼Œç…§æŠ„å³å¯
    function _afterTokenTransfer(address from, address to, uint256 amount) internal override(ERC20Votes) {
        super._afterTokenTransfer(from, to, amount);
    }

    function _mint(address to, uint256 amount) internal override(ERC20Votes) {
        super._mint(to, amount);
    }

    function _burn(address account, uint256 amount) internal override(ERC20Votes) {
        super._burn(account, amount);
    }
}
```
> **æ³¨æ„**ï¼šæŒæœ‰ä»£å¸ä¸ä»£è¡¨èƒ½æŠ•ç¥¨ï¼ä½ éœ€è¦æ‰§è¡Œ **`delegate(å§”æ‰˜)`** æ“ä½œï¼ŒæŠŠè‡ªå·±å§”æ‰˜ç»™è‡ªå·±ï¼Œæ‰èƒ½æ¿€æ´»æŠ•ç¥¨æƒã€‚

### ç¬¬äºŒæ­¥ï¼šæ—¶é—´é” (MyTimelock)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/governance/TimelockController.sol";

contract MyTimelock is TimelockController {
    // æœ€å°å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯”å¦‚ 1 å¤©ï¼‰ï¼Œæè®®è€…åå•ï¼Œæ‰§è¡Œè€…åå•
    constructor(
        uint256 minDelay,
        address[] memory proposers,
        address[] memory executors
    ) TimelockController(minDelay, proposers, executors, msg.sender) {}
}
```

### ç¬¬ä¸‰æ­¥ï¼šæ²»ç†æ ¸å¿ƒ (MyGovernor)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/governance/Governor.sol";
import "@openzeppelin/contracts/governance/extensions/GovernorSettings.sol";
import "@openzeppelin/contracts/governance/extensions/GovernorCountingSimple.sol";
import "@openzeppelin/contracts/governance/extensions/GovernorVotes.sol";
import "@openzeppelin/contracts/governance/extensions/GovernorVotesQuorumFraction.sol";
import "@openzeppelin/contracts/governance/extensions/GovernorTimelockControl.sol";

contract MyGovernor is 
    Governor, 
    GovernorSettings, 
    GovernorCountingSimple, 
    GovernorVotes, 
    GovernorVotesQuorumFraction, 
    GovernorTimelockControl 
{
    constructor(IVotes _token, TimelockController _timelock)
        Governor("MyGovernor")
        GovernorSettings(
            1,          // æŠ•ç¥¨å»¶è¿Ÿ (Voting Delay): ææ¡ˆåå¤šä¹…å¼€å§‹æŠ•ç¥¨ (1 block)
            45818,      // æŠ•ç¥¨å‘¨æœŸ (Voting Period): æŠ•ç¥¨æŒç»­å¤šä¹… (çº¦ 1 å‘¨)
            0           // ææ¡ˆé—¨æ§› (Proposal Threshold): æŒæœ‰å¤šå°‘å¸æ‰èƒ½æè®® (0)
        )
        GovernorVotes(_token)
        GovernorVotesQuorumFraction(4) // æ³•å®šäººæ•° (Quorum): éœ€è¦ 4% çš„æ€»ä¾›åº”é‡å‚ä¸æ‰ç®—æœ‰æ•ˆ
        GovernorTimelockControl(_timelock)
    {}

    // ä¸‹é¢æ˜¯å¿…é¡»çš„æ ·æ¿ä»£ç é‡å†™
    function proposalThreshold() public view override(Governor, GovernorSettings) returns (uint256) {
        return super.proposalThreshold();
    }
    
    // ... (å…¶ä»–é‡å†™å‡½æ•°ï¼Œé€šå¸¸ IDE ä¼šæç¤ºè¡¥å…¨)
    function state(uint256 proposalId) public view override(Governor, GovernorTimelockControl) returns (ProposalState) {
        return super.state(proposalId);
    }

    function _execute(uint256 proposalId, address[] memory targets, uint256[] memory values, bytes[] memory calldatas, bytes32 descriptionHash) internal override(Governor, GovernorTimelockControl) {
        super._execute(proposalId, targets, values, calldatas, descriptionHash);
    }

    function _cancel(address[] memory targets, uint256[] memory values, bytes[] memory calldatas, bytes32 descriptionHash) internal override(Governor, GovernorTimelockControl) returns (uint256) {
        return super._cancel(targets, values, calldatas, descriptionHash);
    }

    function _executor() internal view override(Governor, GovernorTimelockControl) returns (address) {
        return super._executor();
    }

    function supportsInterface(bytes4 interfaceId) public view override(Governor, GovernorTimelockControl) returns (bool) {
        return super.supportsInterface(interfaceId);
    }
}
```

---

## ğŸ—³ï¸ æ²»ç†æµç¨‹å…¨æ™¯å›¾

```
ç”¨æˆ·æ“ä½œ                      åˆçº¦çŠ¶æ€
   â”‚
   â–¼
1. åˆ›å»ºææ¡ˆ (Propose) â”€â”€â”€â”€â”€â”€â–¶  Pending (ç­‰å¾…æœŸ)
   â”‚                           â”‚
   â”‚ (ç­‰å¾… Delay)               â–¼
   â”‚                          Active (æŠ•ç¥¨è¿›è¡Œä¸­) â—€â”€â”€â”€ 2. æŠ•ç¥¨ (Vote)
   â”‚                           â”‚
   â”‚ (ç­‰å¾… Period)              â–¼
   â”‚                          Succeeded / Defeated (ç»“æœå‡ºç‚‰)
   â”‚                           â”‚
   â–¼                           â”‚ (å¦‚æœé€šè¿‡)
3. æ’é˜Ÿ (Queue) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  Queued (è¿›å…¥æ—¶é—´é”)
   â”‚                           â”‚
   â”‚ (ç­‰å¾… Timelock)            â–¼
   â–¼                          Executed (æ‰§è¡Œç”Ÿæ•ˆ) â—€â”€â”€â”€ 4. æ‰§è¡Œ (Execute)
   â”‚                           â”‚
   â–¼                           â–¼
å›½åº“è½¬è´¦/ä¿®æ”¹å‚æ•°              å®Œæˆï¼
```

---

## â˜ ï¸ DAO çš„é£é™©ä¸æ²»ç†æ”»å‡»

### 1. 51% æ”»å‡»
å¦‚æœä¸€ä¸ªäººä¹°ä¸‹äº† 51% çš„ä»£å¸ï¼Œä»–å°±å¯ä»¥é€šè¿‡ä»»ä½•ææ¡ˆï¼Œç”šè‡³æŠŠå›½åº“æç©ºã€‚

### 2. é—ªç”µè´·æ²»ç†æ”»å‡»
é»‘å®¢é€šè¿‡é—ªç”µè´·å€Ÿæ¥å·¨é‡ä»£å¸ï¼Œè¿›è¡ŒæŠ•ç¥¨ï¼Œç„¶åè¿˜å¸ã€‚
**é˜²å¾¡**ï¼š
- ä½¿ç”¨ `ERC20Votes` çš„å¿«ç…§æœºåˆ¶ï¼ˆCheckpointï¼‰ã€‚
- æˆ–è€…æ˜¯è®¾ç½® `Voting Delay`ï¼ˆæŠ•ç¥¨å»¶è¿Ÿï¼‰ã€‚å¦‚æœä½ åœ¨ææ¡ˆå‘èµ·åæ‰å€Ÿå¸ï¼Œé‚£æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºå¿«ç…§è®°å½•çš„æ˜¯è¿‡å»çš„çŠ¶æ€ã€‚

### 3. åªæœ‰å¤§æˆ·è¯´äº†ç®—ï¼Ÿ
å¾ˆå¤š DAO é¢ä¸´â€œå†·æ¼ â€é—®é¢˜ï¼Œå°æ•£æˆ·ä¸æŠ•ç¥¨ã€‚
**è§£å†³**ï¼š
- **æµåŠ¨æ€§æ²»ç†**ã€‚
- **äºŒæ¬¡æ–¹æŠ•ç¥¨ (Quadratic Voting)**ï¼šé€šè¿‡æ•°å­¦å…¬å¼å¹³è¡¡å¤§æˆ·æƒé‡ï¼ˆ1ç¥¨=1å…ƒï¼Œ100ç¥¨=10000å…ƒï¼‰ï¼Œè®©å°‘æ•°äººçš„å£°éŸ³ä¹Ÿèƒ½è¢«å¬è§ï¼ˆç¨é«˜çº§ï¼Œäº†è§£å³å¯ï¼‰ã€‚

---

## ğŸ§ª è¯¾åå°ä½œä¸š

1.  **éƒ¨ç½²**ï¼šåœ¨ Remix ä¸Šå°è¯•éƒ¨ç½²è¿™ä¸‰ä¸ªåˆçº¦ã€‚
2.  **è®¾ç½®æƒé™**ï¼šè®°å¾—æŠŠ `Timelock` çš„ **Proposer** è§’è‰²ç»™ `Governor` åˆçº¦ï¼ŒæŠŠ **Executor** è§’è‰²ç»™ `0x000...0` (ä»£è¡¨ä»»ä½•äººéƒ½å¯ä»¥æ‰§è¡Œ)ã€‚
3.  **æµç¨‹ä½“éªŒ**ï¼š
    - ç»™è‡ªå·±å‘å¸ï¼Œå¹¶ `delegate` ç»™è‡ªå·±ã€‚
    - è¿™é‡Œçš„ `Box` åˆçº¦æœ‰ä¸€ä¸ª `store(uint256)` å‡½æ•°ã€‚
    - å‘èµ·ææ¡ˆï¼šæŠŠ `Box` çš„å€¼æ”¹ä¸º 777ã€‚
    - æŠ•ç¥¨ã€‚
    - ç­‰å¾…ï¼Œæ’é˜Ÿï¼Œæ‰§è¡Œã€‚
    - æ£€æŸ¥ `Box` çš„å€¼å˜äº†å—ï¼Ÿ

---

## ğŸš€ ä¸‹ä¸€è¯¾é¢„å‘Š
**ç¬¬15è¯¾ï¼šLayer 2 ä¸ æ‰©å±•æ–¹æ¡ˆ**
- ä»¥å¤ªåŠå¤ªè´µå¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ
- Rollup æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæŠŠäº¤æ˜“å·èµ·æ¥ï¼ï¼‰
- ä¹è§‚ Rollup vs ZK Rollup
- å¦‚ä½•æŠŠ DApp éƒ¨ç½²åˆ° Layer 2

---
ğŸ’¡ **è®°ä½**ï¼šDAO æ˜¯ä»£ç æ„å»ºçš„æ°‘ä¸»ï¼Œè™½ç„¶ä¸å®Œç¾ï¼Œä½†å®ƒæ˜¯ç»„ç»‡åä½œçš„ä¸€æ¬¡ä¼Ÿå¤§å®éªŒã€‚
